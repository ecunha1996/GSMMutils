from collections import OrderedDict
from os.path import join

from gsmmutils import DATA_PATH, MyModel
from gsmmutils.model.FAME2Biomass import FAME2Biomass

if __name__ == '__main__':
    directory = join(DATA_PATH, 'fame2biomass')
    model = MyModel(join(join(DATA_PATH, 'models'), 'model_pl.xml'), "e_Biomass__in")
    fame2biomass = FAME2Biomass(model, data_directory=directory)
    lipid_compartments_map = {"PG": "in", "PC": "in", "PE": "in", "PI": "in", "MGDG": "in", "DGDG": "in", "SQDG": "in", "DGTS": "in", "DAG": "in", "TAG": "in", "CL": "in"}
    abb_compartment_id_map = {'in': 'in'}

    # obj_list = OrderedDict({
    #     "12_0": 0.289044042,
    #     "14_0": 0.059474652,
    #     "16_0": 0.09717654,
    #     "16_1": 0.085461978,
    #     "18_0": 0.044061607,
    #     "18_1": 0.114755284,
    #     "18_1v2": 0.030889499,
    #     "18_2": 0.015055207,
    #     "18_3": 0.005095871,
    #     "18_3v2": 0.085486575,
    #     "18_4": 0.010575813,
    #     "20_0": 0.133221986,
    #     "20_5": 0.023170991,
    #     "22_6": 0.006529956,
    # })
    # fame2biomass.run("DAG", obj_list, compartment='in', compartment_id="C_in")

    # obj_list = OrderedDict({
    #     "14_0": 0.066276344,
    #     "16_0": 0.094224093,
    #     "16_1": 0.170219675,
    #     "16_2": 0.040967052,
    #     "18_0": 0.021577367,
    #     "18_1": 0.019128413,
    #     "18_1v2": 0.007965365,
    #     "18_2": 0.049563199,
    #     "18_3": 0.024950868,
    #     "18_3v2": 0.029407501,
    #     "18_4": 0.163167104,
    #     "20_4": 0.002231668,
    #     "20_5": 0.283762066,
    #     "22_6": 0.026559287,
    # })
    # fame2biomass.run("MGDG", obj_list, compartment='in', compartment_id="C_in")

    # obj_list = OrderedDict({
    #     "14_0": 0.092688075,
    #     "15_0": 0.01811456,
    #     "16_0": 0.187385664,
    #     "16_1": 0.134344065,
    #     "16_2": 0.021328987,
    #     "18_0": 0.024553406,
    #     "18_1": 0.027360304,
    #     "18_1v2": 0.014333461,
    #     "18_2": 0.011477879,
    #     "18_3": 0.01766895,
    #     "18_3v2": 0.019889947,
    #     "18_4": 0.090182242,
    #     "20_5": 0.31008232,
    #     "22_6": 0.03059014,
    # })
    # fame2biomass.run("DGDG", obj_list, compartment='in', compartment_id="C_in")

    # #main(model, 'CL', compartment='mito')
    # obj_list = OrderedDict({
    #         "14_0": 0.280159697,
    #         "16_0": 0.309103808,
    #         "16_1": 0.081136213,
    #         "18_0": 0.023448664,
    #         "18_1": 0.035669298,
    #         "18_1v2": 0.031103831,
    #         "18_2": 0.031466115,
    #         "18_3": 5.92874E-05,
    #         "18_3v2": 0.065435642,
    #         "18_4": 0.01151675,
    #         "20_2": 0.012009541,
    #         "20_4": 0.002271093,
    #         "20_5": 0.31008232,
    #         "22_6": 0.03059014,
    #     })
    # fame2biomass.run("SQDG", obj_list, compartment='in', compartment_id="C_in")

    # obj_list = OrderedDict({
    #     "14_0": 0.040135947,
    #     "16_0": 0.130508986,
    #     "16_1": 0.182152532,
    #     "17_0": 0.004561512,
    #     "17_1": 0.0224924,
    #     "18_0": 0.00436691,
    #     "18_1": 0.019950212,
    #     "18_2": 0.022195869,
    #     "18_3": 0.00988604,
    #     "18_4": 0.008658579,
    #     "20_4": 0.058043995,
    #     "20_5": 0.497047018,
    # })
    # fame2biomass.run("DGTS", obj_list, compartment='er', compartment_id="C_er")
    # main(model, 'CL', compartment='mito')
    # fame2biomass.merge_results()
    # load_results()

    # obj_list = OrderedDict({
    #     "12_0": 0.026690387,
    #     "13_0": 0.026690387,
    #     "17_0": 0.683327313,
    #     "18_1": 0.131645956,
    #     "18_1v2": 0.131645956,
    # })
    # fame2biomass.run("PC", obj_list, compartment='in', compartment_id="C_in")

    # obj_list = OrderedDict({
    #          "17_0": 0.871193583,
    #          "17_1": 0.0300847,
    #          "18_1": 0.049360858,
    #          "18_1v2": 0.049360858,
    #         })
    # fame2biomass.run("PE", obj_list, compartment='in', compartment_id="C_in")

    # obj_list = OrderedDict({
    #     "14_0": 0.038062284,
    #     "16_0": 0.232447032,
    #     "16_1": 0.478696966,
    #     "18_0": 0.009515571,
    #     "18_1": 0.018094756,
    #     "18_2": 0.042387543,
    #     "20_4": 0.121972318,
    #     "20_5": 0.058823529,
    # })
    # # fame2biomass.run("PI", obj_list, compartment='er', compartment_id="C_er")
    #
    # obj_list = OrderedDict(
    #     {"14_0": 0.037462001,
    #      "16_0": 0.108816427, "16_1": 0.070450454, "16_3": 0.011596111,
    #      "17_0": 0.472662943,
    #      "18_0": 0.019378351, "18_1": 0.041136589, "18_1v2": 0.023084483, "18_2": 0.027671834, "18_3": 0.007358913, "18_3v2": 0.007957799, "18_4": 0.016348838,
    #      "19_1": 0.005382464,
    #      "20_4": 0.00263548, "20_5": 0.065613455,
    #      "22_5": 0.013177399, "22_6": 0.06926646})
    # fame2biomass.run("PG", obj_list, compartment='in', compartment_id="C_in")

    # obj_list = OrderedDict({
    #     "14_0": 0.085341908,
    #     "15_0": 0.023744627,
    #     "16_0": 0.241513779,
    #     "16_1": 0.27440046,
    #     "16_2": 0.009963648,
    #     "17_1": 0.010783606,
    #     "18_0": 0.008494704,
    #     "18_1": 0.039185096,
    #     "18_1v2": 0.033400287,
    #     "18_2": 0.045029664,
    #     "18_3": 0.006562361,
    #     "18_3v2": 0.00861016,
    #     "18_4": 0.024634816,
    #     "20_2": 0.027218895,
    #     "20_4": 0.003204066,
    #     "20_5": 0.08894206,
    #     "22_5": 0.005727968,
    #     "22_6": 0.063241893
    # })
    # fame2biomass.run("TAG", obj_list, compartment='in', compartment_id="C_in")

    # obj_list = OrderedDict({
    #     "14_0": 0.238843612,
    #     "15_0": 0.018350467,
    #     "16_0": 0.148966723,
    #     "16_1": 0.042490761,
    #     "18_0": 0.006694943,
    #     "18_1": 0.008815058,
    #     "18_1v2": 0.010047173,
    #     "18_2": 6.4599E-06,
    #     "18_3": 1.58148E-05,
    #     "18_3v2": 1.30133E-05,
    #     "18_4": 0.005015905,
    #     "20_2": 0.006819845,
    #     "20_4": 0.015971829,
    #     "20_5": 0.13582895,
    #     "22_5": 0.032555019,
    #     "22_6": 0.329564426
    # })
    # fame2biomass.run("DGTA", obj_list, compartment='in', compartment_id="C_in")

    obj_list = OrderedDict({
        "14_0": 0.078043464,
        "16_0": 0.258991679,
        "16_1": 0.029077632,
        "18_0": 0.010738886,
        "18_1": 0.013961748,
        "18_1v2": 0.015254553,
        "18_2": 0.004493382,
        "18_3": 0.002206182,
        "18_3v2": 0.002204286,
        "18_4": 0.034520966,
        "20_4": 0.034479854,
        "20_5": 0.385426069,
        "22_5": 0.010935595,
        "22_6": 0.119665704
    })
    fame2biomass.run("DGCC", obj_list, compartment='in', compartment_id="C_in")





